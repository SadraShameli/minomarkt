echo "Running checks";

echo "Running NPM package sorter";
npx sort-package-json;

echo "Running NPM linter";
npm run lint:fix;

echo "Running Composer linter";
cd public/wp-content/themes/minomarkt;

if [[ "$OSTYPE" == "msys" || "$OSTYPE" == "win32" || "$OSTYPE" == "cygwin" ]]; then
  if [ -f "$HOME/.config/herd-lite/bin/composer.bat" ]; then
    "$HOME/.config/herd-lite/bin/composer.bat" run lint;
  else
    echo "Warning: Composer not found on Windows, skipping composer linting"
    exit 0;
  fi
else
  composer run lint;
fi
